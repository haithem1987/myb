<div class="container my-4">
  <div class="d-flex justify-content-between mb-3">
    <h2 class="mb-0" style="color: var(--bs-darklight)">Tax Manager</h2>
    <button type="button" class="btn btn-primary" (click)="openModal()">
      <i class="bi bi-plus-lg"></i> Add Tax
    </button>
  </div>
  <input
    type="text"
    class="form-control mb-3"
    placeholder="Search taxes..."
    [(ngModel)]="searchTerm"
  />
  <br />
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a
            class="nav-link cursor-pointer"
            [ngClass]="{ active: activeTab === 'ACTIVE' }"
            (click)="setActiveTab('ACTIVE')"
          >
            {{ 'ACTIVE' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            [ngClass]="{ active: activeTab === 'ARCHIVED' }"
            (click)="setActiveTab('ARCHIVED')"
          >
            {{ 'ARCHIVED' | translate }}
          </a>
        </li>
      </ul>
    </div>
    <div class="card border-primary p-2">
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col" style="cursor: pointer">Tax Name</th>
              <th scope="col" style="cursor: pointer">Tax value</th>
              <th scope="col">Created at</th>
              <th scope="col" style="cursor: pointer">Updated at</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for(tax of taxes$ | async ; track tax){
            @if(showTax(tax)){
            <tr>
              <td>
                {{ tax.name }}
              </td>
              <td>
                {{ tax.value }}
                @if(tax.isPercentage == true){
                <span> %</span>
                }
              </td>
              <td>{{ tax.createdAt | date : 'MM/dd/yyyy' }}</td>
              <td>{{ tax.updatedAt | date : 'MM/dd/yyyy' }}</td>
              @if(!tax.isArchived){
                <td>
                  <button type="button" class="btn btn-outline-primary me-2" (click)="openEditModal(tax)">
                    <i class="bi bi-pencil-square"></i>
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    (click)="archiveTax(tax)"
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </td>
                } @if(tax.isArchived){
                  <td>
                <button
                  class="btn btn-outline-secondary btn-sm me-2"
                  (click)="restoreTax(tax)"
                >
                  <i class="bi bi-arrow-repeat me-2"></i>Restore
                </button>
              </td>
                }
             
            </tr>
            } }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
