<div class="modal-header">
  <h5 class="modal-title" *ngIf="!isPaymentSuccessful && !isPaymentFailed">
    {{ 'PAYMENT.COMPLETE_PAYMENT' | translate }}
  </h5>
  <h5 class="modal-title text-success" *ngIf="isPaymentSuccessful">
    <i class="bi bi-check-circle-fill"></i>
    {{ 'PAYMENT.SUCCESS_TITLE' | translate }}
  </h5>
  <h5 class="modal-title text-danger" *ngIf="isPaymentFailed">
    <i class="bi bi-x-circle-fill"></i>
    {{ 'PAYMENT.FAILURE_TITLE' | translate }}
  </h5>
  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="closeModal()"
  ></button>
</div>

<div
  class="modal-body"
  *ngIf="!isPaymentSuccessful && !isPaymentFailed; else messageContent"
>
  <form [formGroup]="cardForm" (ngSubmit)="createToken()">
    <div class="mb-3">
      <label for="name" class="form-label">
        {{ 'PAYMENT.NAME_ON_CARD' | translate }}
      </label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control form-control-lg"
        placeholder="{{ 'PAYMENT.CARDHOLDER_NAME_PLACEHOLDER' | translate }}"
      />
    </div>

    <div class="mb-3 ngx-stripe-card">
      <ngx-stripe-card [options]="cardOptions"></ngx-stripe-card>
    </div>

    <button
      type="submit"
      class="btn btn-primary w-100 btn-lg"
      [disabled]="isLoading"
    >
      <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
      <span *ngIf="!isLoading">{{ 'PAYMENT.SUBMIT' | translate }}</span>
    </button>
  </form>
</div>

<ng-template #messageContent>
  <div *ngIf="isPaymentSuccessful" class="text-center p-3">
    <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem"></i>
    <h4 class="mt-3">{{ 'PAYMENT.SUCCESS_MESSAGE' | translate }}</h4>
    <p>{{ 'PAYMENT.THANK_YOU' | translate }}</p>
    <button class="btn btn-secondary mt-3" (click)="closeModal()">
      {{ 'PAYMENT.CLOSE' | translate }}
    </button>
  </div>

  <div *ngIf="isPaymentFailed" class="text-center p-3">
    <i class="bi bi-x-circle-fill text-danger" style="font-size: 3rem"></i>
    <h4 class="mt-3">{{ 'PAYMENT.FAILURE_MESSAGE' | translate }}</h4>
    <p>{{ 'PAYMENT.RETRY' | translate }}</p>
    <button class="btn btn-secondary mt-3" (click)="closeModal()">
      {{ 'PAYMENT.CLOSE' | translate }}
    </button>
  </div>
</ng-template>
