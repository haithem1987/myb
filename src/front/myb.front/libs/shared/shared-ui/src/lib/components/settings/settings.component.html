<myb-front-nav-bar></myb-front-nav-bar>
<div class="container mt-4">
  <h2>Settings</h2>
  <myb-front-breadcrumb></myb-front-breadcrumb>
  <div class="accordion" id="settingsAccordion">
    <div class="accordion-item" *ngFor="let category of categories">
      <h2 class="accordion-header" [id]="category + 'SettingsHeader'">
        <button
          class="accordion-button"
          type="button"
          data-bs-toggle="collapse"
          [attr.data-bs-target]="'#' + category + 'Settings'"
          aria-expanded="true"
          [attr.aria-controls]="category + 'Settings'"
        >
          {{ category | titlecase }} Settings
        </button>
      </h2>
      <div
        [id]="category + 'Settings'"
        class="accordion-collapse collapse show"
        [attr.aria-labelledby]="category + 'SettingsHeader'"
        data-bs-parent="#settingsAccordion"
      >
        <div class="accordion-body">
          <div *ngFor="let key of keys[category]" class="mb-3">
            <label [for]="key" class="form-label">{{ key | titlecase }}:</label>

            <ng-container [ngSwitch]="getType(settings[category][key])">
              <input
                *ngSwitchCase="'string'"
                type="text"
                [id]="key"
                class="form-control"
                [value]="settings[category][key]"
                (input)="onSettingChange(category, key, $event)"
              />

              <input
                *ngSwitchCase="'number'"
                type="number"
                [id]="key"
                class="form-control"
                [value]="settings[category][key]"
                (input)="onSettingChange(category, key, $event)"
              />

              <select
                *ngSwitchCase="'object'"
                [id]="key"
                class="form-control"
                (change)="onSettingChange(category, key, $event)"
              >
                <option
                  *ngFor="let option of settings[category][key]"
                  [value]="option"
                >
                  {{ option }}
                </option>
              </select>

              <div *ngSwitchCase="'boolean'" class="form-check">
                <input
                  type="checkbox"
                  [id]="key"
                  class="form-check-input"
                  [checked]="settings[category][key]"
                  (change)="onSettingChange(category, key, $event)"
                />
                <label class="form-check-label" [for]="key">{{
                  key | titlecase
                }}</label>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
