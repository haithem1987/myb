<myb-front-nav-bar></myb-front-nav-bar>

<div class="container mt-5">
  <div class="mt-4">
    <myb-front-breadcrumb></myb-front-breadcrumb>
  </div>
  <h2>{{ 'SUBSCRIPTIONS.TITLE' | translate }}</h2>

  <ng-container *ngIf="subscriptions$ | async as subscriptions">
    <!-- Show alert if the list is empty -->
    <div *ngIf="subscriptions.length === 0" class="alert alert-info">
      {{ 'SUBSCRIPTIONS.NO_SUBSCRIPTIONS' | translate }}
    </div>

    <table class="table table-striped mt-3" *ngIf="subscriptions.length > 0">
      <thead>
        <tr>
          <th>{{ 'SUBSCRIPTIONS.SERVICE_NAME' | translate }}</th>
          <th>{{ 'SUBSCRIPTIONS.PRICE' | translate }}</th>
          <th>{{ 'SUBSCRIPTIONS.STATUS' | translate }}</th>
          <th>{{ 'SUBSCRIPTIONS.EXPIRY_DATE' | translate }}</th>
          <th class="text-end">{{ 'SUBSCRIPTIONS.ACTION' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let sub of subscriptions">
          <td>{{ sub.ServiceName | translate }}</td>
          <td>{{ sub.Price / 1000 | currency }}</td>
          <td>{{ sub.PaymentStatus }}</td>
          <td>{{ (sub.ExpiryDate | date) || '--' }}</td>
          <td class="text-end">
            <button
              class="btn btn-danger btn-sm"
              (click)="unsubscribe(sub.ServiceId)"
            >
              {{ 'SUBSCRIPTIONS.UNSUBSCRIBE' | translate }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-container>
</div>
