<div class="container my-4">
  <div class="d-flex justify-content-between mb-3">
    <h2 class="mb-0" style="color: var(--bs-darklight)">Task Manager</h2>
    <button type="button" class="btn btn-outline-primary" (click)="openModal()">
      <i class="bi bi-plus-lg"></i> Create Task
    </button>
  </div>
  <input
    type="text"
    class="form-control mb-3"
    placeholder="Search tasks..."
    [(ngModel)]="searchTerm"
    (keyup)="filterTasks()"
  />
  <table class="table table-hover shadow">
    <thead class="table-secondary">
      <tr>
        <th scope="col" (click)="onSort('description')" style="cursor: pointer">
          Task Description
          <i
            class="bi"
            [ngClass]="{
              'bi-sort-alpha-down':
                sortColumn === 'description' && sortDirection === 'asc',
              'bi-sort-alpha-up':
                sortColumn === 'description' && sortDirection === 'desc',
              'bi-sort': sortColumn !== 'description'
            }"
          ></i>
        </th>
        <th scope="col" (click)="onSort('startTime')" style="cursor: pointer">
          Start Time
          <i
            class="bi"
            [ngClass]="{
              'bi-sort-numeric-down':
                sortColumn === 'startTime' && sortDirection === 'asc',
              'bi-sort-numeric-up':
                sortColumn === 'startTime' && sortDirection === 'desc',
              'bi-sort': sortColumn !== 'startTime'
            }"
          ></i>
        </th>
        <th scope="col" (click)="onSort('endTime')" style="cursor: pointer">
          End Time
          <i
            class="bi"
            [ngClass]="{
              'bi-sort-numeric-down':
                sortColumn === 'endTime' && sortDirection === 'asc',
              'bi-sort-numeric-up':
                sortColumn === 'endTime' && sortDirection === 'desc',
              'bi-sort': sortColumn !== 'endTime'
            }"
          ></i>
        </th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of updatedTasks">
        <td>{{ task.description }}</td>
        <td>{{ task.startTime | date : 'MM/dd/yyyy, h:mm a' }}</td>
        <td>{{ task.endTime | date : 'MM/dd/yyyy, h:mm a' }}</td>
        <td>
          <button
            type="button"
            class="btn btn-outline-primary me-2"
            (click)="openModal(task)"
          >
            <i class="bi bi-pencil-square"></i>
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="onDelete(task.id)"
          >
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
