<div class="card d-flex mb-3">
  <form
    [formGroup]="timesheetForm"
    class="entry-body d-flex flex-wrap align-content-center"
  >
    <div class="border-end flex-fill align-items-center form-floating">
      <input
        type="text"
        id="description"
        formControlName="description"
        class="form-control border-0"
        placeholder="Sur quoi avez-vous travaillé ?"
      />
      <label for="description">Description</label>
    </div>

    <div class="flex-fill align-items-center form-floating">
      <select
        id="projectId"
        placeholder="project"
        class="form-control border-0"
        [(ngModel)]="selectedProject"
        (ngModelChange)="onProjectSelect($event)"
        [ngModelOptions]="{ standalone: true }"
      >
        <option [ngValue]="null" selected>Sélectionner un projet</option>
        <option
          *ngFor="let project of activeProjects$ | async"
          [ngValue]="project"
        >
          {{ project.projectName }}
        </option>
      </select>
      <label for="projectId">Projet</label>
    </div>

    <div
      class="flex-fill justify-content-center ml-3 border-start form-floating"
    >
      <select
        id="employeeId"
        class="form-control border-0"
        [(ngModel)]="selectedEmployee"
        (ngModelChange)="onEmployeeSelect($event)"
        [ngModelOptions]="{ standalone: true }"
      >
        <option [ngValue]="null" selected>Sélectionner un employé</option>
        <option
          *ngFor="let employee of employees$ | async"
          [ngValue]="employee"
        >
          {{ employee.name }}
        </option>
      </select>
      <label for="employeeId">Intervenant</label>
    </div>

    <div class="flex-fill ml-3 border-start form-floating" style="width: 90px">
      <input
        id="date"
        formControlName="date"
        placeholder="YYYY-MM-DD"
        class="form-control flex-fill border-0"
        ngbDatepicker
        #datePicker="ngbDatepicker"
        (click)="datePicker.toggle()"
      />
      <label for="date">Date</label>
    </div>

    <div
      class="flex-fill align-items-center border-start form-floating"
      style="width: 65px"
    >
      <input
        type="text"
        id="workedHours"
        formControlName="workedHours"
        class="form-control border-0"
        [readonly]="isTimerRunning"
        mask="00:00:00"
        separator=":"
      />
      <label for="workedHours">Heures</label>
    </div>
    <div class="d-flex border-start">
      <button
        type="button"
        class="btn p-3 rounded-0"
        (click)="toggleTimer()"
        [ngClass]="isTimerRunning ? 'btn-danger' : 'btn-light'"
      >
        <i
          class="bi"
          [ngClass]="isTimerRunning ? 'bi-stop-circle' : 'bi-play-circle'"
        ></i>
        <!-- Timer icon -->
      </button>
      <button
        type="button"
        class="btn btn-primary rounded-0 rounded-end ml-3 py-3 fw-bold text-uppercase"
        (click)="addEntry()"
      >
        <i class="bi bi-check-circle"></i>
        AJOUter
        <!-- Add icon -->
      </button>
    </div>
  </form>
</div>
