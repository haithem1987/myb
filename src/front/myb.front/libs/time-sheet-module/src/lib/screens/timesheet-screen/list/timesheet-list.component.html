<div class="container my-4">
  <div class="d-flex justify-content-between mb-3">
    <h2 class="mb-0 w-50" style="color: var(--bs-darklight)">
      Timesheet Manager
    </h2>
    <input
      type="text"
      class="form-control mb-3"
      placeholder="Search timesheets..."
      [(ngModel)]="searchTerm"
      (keyup)="filterTimesheets()"
    />
  </div>

  <div class="mb-3">
    <div class="btn-group" ngbButtonGroup>
      <button
        type="button"
        class="btn btn-outline-primary"
        [class.active]="selectedPeriod === 'day'"
        (click)="setPeriod('day')"
      >
        Day
      </button>
      <button
        type="button"
        class="btn btn-outline-primary"
        [class.active]="selectedPeriod === 'week'"
        (click)="setPeriod('week')"
      >
        Week
      </button>
      <button
        type="button"
        class="btn btn-outline-primary"
        [class.active]="selectedPeriod === 'month'"
        (click)="setPeriod('month')"
      >
        Month
      </button>
    </div>
  </div>

  <div *ngFor="let group of groupedTimesheets$ | async | keyvalue">
    <h3>{{ group.key }}</h3>
    <div class="card pt-2 table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Project</th>
            <th class="text-center" *ngFor="let date of dateRange">
              <div class="text-muted fw-light">{{ date.weekday }}</div>
              <div>{{ date.day }}</div>
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let timesheet of group.value; trackBy: trackByTimesheet">
            <td>{{ timesheet.projectName }}</td>
            <td
              class="text-center"
              style="width: 100px"
              *ngFor="let date of dateRange; trackBy: trackByDate"
              [ngClass]="{ 'bg-light text-muted': isWeekend(date) }"
            >
              <ng-container *ngIf="!isWeekend(date)">
                <input
                  type="number"
                  class="form-control text-center"
                  [value]="
                    getHoursForDate(timesheet.id, date.weekday + ' ' + date.day)
                  "
                  (input)="onHoursChange(timesheet.id, date, $event)"
                />
              </ng-container>
            </td>
            <td>
              <!-- Action buttons can be added here -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
