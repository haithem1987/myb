<myb-front-loading-indicator
  [isLoading]="isLoading"
></myb-front-loading-indicator>
<div *ngIf="!isLoading" class="container my-4">
  <!-- <myb-front-timesheet-header></myb-front-timesheet-header> -->
  <div class="mb-3 d-flex justify-content-between align-items-center">
    <div>
      <myb-front-period-selector
        [selectedPeriod]="selectedPeriod"
        [weekQuantity]="getTotalQuantitiesForPeriod('week')"
        [monthQuantity]="getTotalQuantitiesForPeriod('month')"
        (periodChange)="setPeriod($event)"
      ></myb-front-period-selector>
      <span class="fw-bold ms-2 h5 m-0">{{
        currentDay | date : 'MMMM yyyy' : translate.currentLang
      }}</span>
    </div>
    <myb-front-timesheet-action-buttons
      [selectedProjectsSize]="selectedProjects.size"
      [isSaving]="isSaving"
      (fillProjects)="fillSelectedProjects()"
      (extractPDF)="extractPDF()"
      (saveChanges)="saveAllChanges()"
    ></myb-front-timesheet-action-buttons>
  </div>
  <myb-front-timesheet-table
    [projects]="projects$ | async"
    [dateRange]="dateRange"
    [selectedProjects]="selectedProjects"
    [holidays]="holidays"
    [weekendDays]="weekendDays"
    [totalPeriod]="totalPeriod"
    [timesheetQuantities]="timesheetQuantities"
    (selectAll)="toggleSelectAll($event)"
    (rowSelectChange)="onRowSelectChange($event.projectId, $event.event)"
    (quantityChange)="
      onQuantityChange($event.projectId, $event.date, $event.quantity)
    "
  ></myb-front-timesheet-table>
</div>
